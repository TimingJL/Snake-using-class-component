(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,n,t){e.exports=t(382)},136:function(e,n,t){},142:function(e,n,t){},382:function(e,n,t){"use strict";t.r(n);var a=t(8),r=t.n(a),o=t(119),i=t.n(o),c=t(107),s=(t(136),t(103)),d=t(104),l=t(109),u=t(105),p=t(110),m=t(31),f=t(43),g=t(81),b=t(82);function h(){var e=Object(g.a)(["\n    color: white;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 5em;\n    margin-top: 10px;\n    .virtual-keyboard__button {\n        cursor: pointer;\n        &:hover {\n            color: #ffd600;\n        }\n    }\n    .virtual-keyboard__wrapper-bottom {\n        display: flex;\n    }\n"]);return h=function(){return e},e}var k=b.a.div(h()),y="".concat("SNAKE_GAME","/INIT"),v="".concat("SNAKE_GAME","/SET_SNAKE_MOVING"),w="".concat("SNAKE_GAME","/SET_SNAKE_DIRECTION"),S="".concat("SNAKE_GAME","/SET_SNAKE_GAME_START"),_="".concat("SNAKE_GAME","/SET_SNAKE_SPEED_MODIFIED"),x=10,O=2,E=function(e){var n=e.handleOnClick;return r.a.createElement(k,null,r.a.createElement("div",null,r.a.createElement("div",{"data-code":"ArrowUp",className:"virtual-keyboard__button fas fa-arrow-circle-up",onClick:n})),r.a.createElement("div",{className:"virtual-keyboard__wrapper-bottom"},r.a.createElement("div",{"data-code":"ArrowLeft",className:"virtual-keyboard__button fas fa-arrow-circle-left",onClick:n}),r.a.createElement("div",{"data-code":"ArrowDown",className:"virtual-keyboard__button fas fa-arrow-circle-down",onClick:n}),r.a.createElement("div",{"data-code":"ArrowRight",className:"virtual-keyboard__button fas fa-arrow-circle-right",onClick:n})))};function j(){var e=Object(g.a)(["\n    position: relative;\n    margin-top: 30px;\n    .snake-game__map-wrapper {\n        width: ","px;\n        height: ","px;\n        @media only screen and (max-width: 600px) {\n            width: calc(100vw - 20px);\n            height: calc(100vw - 20px);\n        }\n        display: grid;\n        grid-template-columns: repeat(",", 1fr);\n        grid-template-rows: repeat(",", 1fr);\n        background: #161616;\n    }\n    .snake-game__map-block-item {\n        border: 1px solid black;\n        box-sizing: border-box;\n    }\n    .snake-game__draw-snake-body {\n        background: white;\n        transition: all 0.1s;\n    }\n    .snake-game__draw-snake-food {\n        background: red;\n        border-radius: 100%;\n        animation: "," 2s infinite;\n    }\n    .snake-game__panel {\n        width: ","px;\n        height: ","px;\n        @media only screen and (max-width: 600px) {\n            width: calc(100vw - 20px);\n            height: calc(100vw - 20px);\n        }\n        position: absolute;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n    }\n    .snake-game__score {\n        color: white;\n        font-weight: 500;\n        font-size: 1.5em;\n        margin: 15px 0px;\n    }\n    .snake-game__start-game-btn {\n        width: 100px;\n        height: 40px;\n        background: black;\n        border: 2px solid white;\n        color: white;\n        border-radius: 20px;\n        font-size: 1.2em;\n        cursor: pointer;\n        outline: none;\n        &:hover {\n            color: black;\n            background: white;\n            transition: all 0.3s;\n        }\n    }\n    .snake-game__pause-game-btn {\n        color: white;\n        border: 1px solid white;\n        border-radius: 8px;\n        text-align: center;\n        line-height: 50px;\n        font-size: 1.5em;\n        letter-spacing: 5px;\n        cursor: pointer;\n        &:hover {\n            color: black;\n            background: white;\n            transition: all 0.3s;\n        }\n    }\n    .snake-game__score-info {\n        color: white;\n        font-weight: 500;\n        font-size: 1.5em;\n    }\n"]);return j=function(){return e},e}function M(){var e=Object(g.a)(["\n    0% {\n        -moz-box-shadow: 0 0 0 0 red;\n        box-shadow: 0 0 0 0 red;\n    }\n    70% {\n        -moz-box-shadow: 0 0 0 20px rgba(204,169,44, 0);\n        box-shadow: 0 0 0 20px rgba(204,169,44, 0);\n    }\n    100% {\n        -moz-box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n        box-shadow: 0 0 0 0 rgba(204,169,44, 0);\n    }\n"]);return M=function(){return e},e}var I,A=Object(b.b)(M()),N=b.a.div(j(),600,600,30,30,A,600,600),G=function(e){return e.get("snakeGame")},C=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).handleOnKeyDown=function(e){(0,t.props.handleOnSetSnakeDirection)(e.code)},t.handleOnGameStartClick=function(){var e=t.props,n=e.handleOnSetSnakeMoving;(0,e.handleOnSetGameStart)(),n()},t.handleOnVirtualKeyboardClick=function(e){(0,t.props.handleOnSetSnakeDirection)(e.currentTarget.getAttribute("data-code"))},t}return Object(p.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleOnKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleOnKeyDown),clearInterval(I)}},{key:"componentDidUpdate",value:function(e,n){var t=e.isSpeedModified,a=this.props,r=a.snake,o=a.isGameStart,i=a.isPause,c=a.handleOnSetSnakeMoving,s=a.handleOnSetSpeedModified;i&&clearInterval(I),t&&(s(!1),clearInterval(I),I=setInterval(function(){o&&!i&&c()},r.get("speed"))),o||(clearInterval(I),s(!0))}},{key:"render",value:function(){var e=this.props,n=e.snake,t=e.blocks,a=e.food,o=e.isGameStart,i=e.score,c=e.isPause;return r.a.createElement(N,{onKeyDown:this.handleOnKeyDown},r.a.createElement("div",{className:"snake-game__score-info"},"Score: ",i),!o&&r.a.createElement("div",{className:"snake-game__panel"},r.a.createElement("div",{className:"snake-game__score"},r.a.createElement("span",null,"Score: "),r.a.createElement("span",null,i)),r.a.createElement("button",{className:"snake-game__start-game-btn",onClick:this.handleOnGameStartClick},"Start")),r.a.createElement("div",{className:"snake-game__map-wrapper"},t.map(function(e){return e.map(function(e){return r.a.createElement("div",{key:e.get("id"),className:function(e,n,t){if(e.getIn(["headPosition","x"])===n.get("x")&&e.getIn(["headPosition","y"])===n.get("y"))return"snake-game__map-block-item snake-game__draw-snake-body";var a=e.get("body");if(a.size>1&&a.find(function(e){return e.get("x")===n.get("x")&&e.get("y")===n.get("y")}))return"snake-game__map-block-item snake-game__draw-snake-body";return n.get("x")===t.get("x")&&n.get("y")===t.get("y")?"snake-game__draw-snake-food":"snake-game__map-block-item"}(n,e,a)})})})),r.a.createElement("div",{"data-code":"Space",onClick:this.handleOnVirtualKeyboardClick,className:"snake-game__pause-game-btn"},c?"\u7e7c\u7e8c":"\u66ab\u505c"),r.a.createElement(E,{handleOnClick:this.handleOnVirtualKeyboardClick}))}}]),n}(a.Component);C.defaultProps={snake:Object(m.Map)(),blocks:Object(m.List)(),food:Object(m.Map)(),isGameStart:!1,score:0,isPause:!1,isSpeedModified:!0,handleOnSetSnakeMoving:function(){},handleOnSetSpeedModified:function(){}};var P=Object(f.b)({snake:Object(f.a)(G,function(e){return e.get("snake")}),blocks:Object(f.a)(G,function(e){return e.get("blocks")}),food:Object(f.a)(G,function(e){return e.get("food")}),isGameStart:Object(f.a)(G,function(e){return e.get("isGameStart")}),score:Object(f.a)(G,function(e){return e.get("score")}),isPause:Object(f.a)(G,function(e){return e.get("isPause")}),isSpeedModified:Object(f.a)(G,function(e){return e.get("isSpeedModified")})}),K=Object(c.b)(P,function(e){return{handleOnSetSnakeMoving:function(){return e({type:v})},handleOnSetSnakeDirection:function(n){return e(function(e){return{type:w,payload:e}}(n))},handleOnSetGameStart:function(){return e({type:S})},handleOnSetSpeedModified:function(n){return e(function(e){return{type:_,payload:e}}(n))}}})(C),D=t(125),z=t.n(D),T=(t(142),function(e){function n(){return Object(s.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(K,null),r.a.createElement(z.a,{size:60,octoColor:"black",bannerColor:"white",href:"https://github.com/TimingJL/Snake"}))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=t(108),L=t(76),R=t(126),U=t(114),V=t.n(U),B={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},W=function(){return{x:Math.floor(30*Math.random()),y:Math.floor(30*Math.random())}},F={headPosition:{x:0,y:0},body:[],maxLength:2,direction:{x:1,y:0},speed:200},$=V.a.range(0,30).map(function(e,n){return V.a.range(0,30).map(function(e,t){return{id:t+30*n,x:t,y:n}})}),q=Object(m.fromJS)({blocks:$,snake:F,food:W(),isGameStart:!1,isPause:!1,isSpeedModified:!0,score:0});var H=function(e){return e>29?0:e<0?30:e},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case y:return q;case v:var t=e.getIn(["snake","direction"]),a=e.getIn(["snake","headPosition","x"]),r=e.getIn(["snake","headPosition","y"]),o=e.getIn(["snake","maxLength"]),i=e.getIn(["snake","body"]),c=e.get("food"),s=c.get("x")===a&&c.get("y")===r,d=a+t.get("x"),l=r+t.get("y"),u=i.find(function(e){return e.get("x")===d&&e.get("y")===l});return e.get("isPause")||!e.get("isGameStart")?e:u?e.set("isGameStart",!1):e.updateIn(["snake","body"],function(e){var n=e.push(Object(m.fromJS)({x:a,y:r}));return n.size>o&&(n=n.shift()),Object(m.fromJS)(n)}).updateIn(["snake","headPosition"],function(e){return e.set("x",H(e.get("x")+t.get("x"))).set("y",H(e.get("y")+t.get("y")))}).updateIn(["food"],function(e){return s?Object(m.fromJS)(W()):e}).updateIn(["snake","maxLength"],function(e){return s?e+1:e}).updateIn(["snake","speed"],function(e){return s?e-O>x?e-O:x:e}).updateIn(["score"],function(e){return s?e+1:e}).updateIn(["isSpeedModified"],function(e){return!!s});case _:return e.set("isSpeedModified",n.payload);case w:if(!e.get("isGameStart"))return e;var p=e.get("isPause"),f=e.get("isSpeedModified");return"Space"===n.payload&&(f=p=!e.get("isPause")),B[n.payload]||"Space"===n.payload?e.updateIn(["snake","direction"],function(e){return"Space"===n.payload||p?e:-1*e.get("x")===B[n.payload].x&&-1*e.get("y")===B[n.payload].y?e:Object(m.fromJS)(B[n.payload])}).set("isPause",p).set("isSpeedModified",f):e;case S:return q.set("isGameStart",!0);default:return e}};var X=t(128),Y=t(385),Z=t(386),ee=t(127),ne=[function(e,n){return e.ofType(y).switchMap(function(){return ee.Observable.empty()})}],te=Object(J.a)(ne);var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&arguments[1],new X.BehaviorSubject(Y.a.apply(void 0,Object(J.a)(te)))),t=Object(Z.a)(),a=[t],r=[L.a.apply(void 0,a)],o=L.c,i=Object(L.d)(Object(R.combineReducers)({snakeGame:Q}),Object(m.fromJS)(e),o.apply(void 0,r));return t.run(function(e,t,a){return n.mergeMap(function(n){return n(e,t,a).catch(function(e,n){return setTimeout(function(){throw e},0),n})})}),i}();i.a.render(r.a.createElement(c.a,{store:ae},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.124e63b7.chunk.js.map