(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,n,t){e.exports=t(380)},135:function(e,n,t){},140:function(e,n,t){},380:function(e,n,t){"use strict";t.r(n);var a=t(11),r=t.n(a),o=t(117),c=t.n(o),i=t(106),u=(t(135),t(72)),s=t(73),d=t(77),l=t(74),f=t(79),p=t(81),m="".concat("SNAKE_GAME","/INIT"),g="".concat("SNAKE_GAME","/SET_SNAKE_MOVING"),h="".concat("SNAKE_GAME","/SET_SNAKE_DIRECTION"),y=20,b=t(120);function k(){var e=Object(b.a)(["\n    .snake-game__map-wrapper {\n        width: ","px;\n        height: ","px;\n        @media only screen and (max-width: 600px) {\n            width: calc(100vw - 20px);\n            height: calc(100vw - 20px);\n        }\n        display: grid;\n        grid-template-columns: repeat(",", 1fr);\n        grid-template-rows: repeat(",", 1fr);\n        background: #161616;\n    }\n    .snake-game__map-block-item {\n        border: 1px solid black;\n        box-sizing: border-box;\n    }\n    .snake-game__draw-snake-body {\n        background: white;\n    }\n    .snake-game__draw-snake-food {\n        background: red;\n    }\n"]);return k=function(){return e},e}var v=t(121).a.div(k(),600,600,y,y),w=function(e){return e.get("snakeGame")},O=function(e){function n(){return Object(u.a)(this,n),Object(d.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this.props.classStyle;return r.a.createElement("div",{className:e})}}]),n}(a.PureComponent),x=function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(r)))).handleOnKeyDown=function(e){(0,t.props.handleOnSetSnakeDirection)(e.code)},t}return Object(f.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.handleOnSetSnakeMoving;document.addEventListener("keydown",this.handleOnKeyDown),setInterval(function(){e()},300)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleOnKeyDown)}},{key:"render",value:function(){var e=this.props,n=e.snake,t=e.blocks,a=e.food;return r.a.createElement(v,{onKeyDown:this.handleOnKeyDown},r.a.createElement("div",{className:"snake-game__map-wrapper"},t.map(function(e){return e.map(function(e){return r.a.createElement(O,{key:e.get("id"),classStyle:function(e,n,t){if(e.getIn(["headPosition","x"])===n.get("x")&&e.getIn(["headPosition","y"])===n.get("y"))return"snake-game__map-block-item snake-game__draw-snake-body";var a=e.get("body");if(a.size>1){if(a.find(function(e){return e.get("x")===n.get("x")&&e.get("y")===n.get("y")}))return"snake-game__map-block-item snake-game__draw-snake-body";if(n.get("x")===t.get("x")&&n.get("y")===t.get("y"))return"snake-game__draw-snake-food"}return"snake-game__map-block-item"}(n,e,a)})})})))}}]),n}(a.Component),j=Object(p.b)({snake:Object(p.a)(w,function(e){return e.get("snake")}),blocks:Object(p.a)(w,function(e){return e.get("blocks")}),food:Object(p.a)(w,function(e){return e.get("food")})}),_=Object(i.b)(j,function(e){return{handleOnSetSnakeMoving:function(){return e({type:g})},handleOnSetSnakeDirection:function(n){return e(function(e){return{type:h,payload:e}}(n))}}})(x),S=(t(140),function(e){function n(){return Object(u.a)(this,n),Object(d.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=t(107),I=t(42),M=t(80),A=t(125),N=t(111),D=t.n(N),K={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},J={x:Math.floor(Math.random()*y),y:Math.floor(Math.random()*y)},P=D.a.range(0,y).map(function(e,n){return D.a.range(0,y).map(function(e,t){return{id:t+y*n,x:t,y:n}})}),G=Object(I.fromJS)({blocks:P,snake:{body:[],maxLength:5,headPosition:{x:0,y:0},direction:{x:1,y:0}},food:J});var L=function(e){return e>y?0:e<0?y:e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:return e;case g:var t=e.getIn(["snake","direction"]),a=e.getIn(["snake","headPosition","x"]),r=e.getIn(["snake","headPosition","y"]),o=e.getIn(["snake","maxLength"]);return e.updateIn(["snake","body"],function(e){var n=e.push(Object(I.fromJS)({x:a,y:r}));return n.size>o&&(n=n.shift()),Object(I.fromJS)(n)}).updateIn(["snake","headPosition","x"],function(e){return L(e+t.get("x"))}).updateIn(["snake","headPosition","y"],function(e){return L(e+t.get("y"))}).updateIn(["food"],function(e){return e.get("x")===a&&e.get("y")===r?Object(I.fromJS)({x:Math.floor(Math.random()*y),y:Math.floor(Math.random()*y)}):e}).updateIn(["snake","maxLength"],function(n){var t=e.get("food");return t.get("x")===a&&t.get("y")===r?n+1:n});case h:return e.updateIn(["snake","direction"],function(e){return-1*e.get("x")===K[n.payload].x&&-1*e.get("y")===K[n.payload].y?e:Object(I.fromJS)(K[n.payload])});default:return e}};var C=t(127),z=t(383),B=t(384),R=t(126),W=[function(e,n){return e.ofType(m).switchMap(function(){return R.Observable.empty()})}],U=Object(E.a)(W);var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&arguments[1],new C.BehaviorSubject(z.a.apply(void 0,Object(E.a)(U)))),t=Object(B.a)(),a=[t],r=[M.a.apply(void 0,a)],o=M.c,c=Object(M.d)(Object(A.combineReducers)({snakeGame:T}),Object(I.fromJS)(e),o.apply(void 0,r));return t.run(function(e,t,a){return n.mergeMap(function(n){return n(e,t,a).catch(function(e,n){return setTimeout(function(){throw e},0),n})})}),c}();c.a.render(r.a.createElement(i.a,{store:V},r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,2,1]]]);
//# sourceMappingURL=main.84ee45c3.chunk.js.map